!function($,window){"use strict";$.fn.xtautosave=function(prefix_param){var storage=window.localStorage,$this=this,prefix;if(typeof $this.prefix_param==="undefined"){prefix=$this.attr("id")||$this.attr("name")||"no-Id-Or-Name-Given"}else{prefix=$this.prefix_param}prefix+="_";$this.attr("prefix",prefix);function restoreInput(elem,index){var key=$.fn.xtautosave.getKey($this,index),value=storage.getItem(key);if(!value){return}if(elem.attr("type")==="checkbox"||elem.attr("type")==="radio"){elem.prop("checked",value)}else{elem.val(value)}}function restoreSelect(elem,index){var key=$.fn.xtautosave.getSelectKey($this,index),value=storage.getItem(key);if(!value){return}value=value.split(",");elem.val(value)}function restore(){var elems;elems=$this.find("input:not([type=password],[type=submit],[type=hidden])");elems.each(function(index,elem){restoreInput($(elem),index)});elems=$this.find("select");elems.each(function(index,elem){restoreSelect($(elem),index)})}$this.on({submit:$.fn.xtautosave.save});restore()};$.fn.xtautosave.getKey=function(elem,index){return elem.attr("prefix")+index};$.fn.xtautosave.getSelectKey=function(elem,index){return"S"+elem.attr("prefix")+index};$.fn.xtautosave.saveInput=function($this,elem,index){var value,key=$.fn.xtautosave.getKey($this,index),storage=window.localStorage;if(elem.attr("type")==="checkbox"||elem.attr("type")==="radio"){value=elem.prop("checked")}else{value=elem.val()}if(value&&value!==""){storage.setItem(key,value)}else{storage.removeItem(key)}};$.fn.xtautosave.saveSelect=function($this,elem,index){var value=elem.val(),key=$.fn.xtautosave.getSelectKey($this,index),storage=window.localStorage;if(value&&value!==""){storage.setItem(key,value)}else{storage.removeItem(key)}};$.fn.xtautosave.save=function(){var $this=$(this),elems;elems=$this.find("input:not([type=password],[type=submit],[type=hidden])");elems.each(function(index,elem){$.fn.xtautosave.saveInput($this,$(elem),index)});elems=$this.find("select");elems.each(function(index,elem){$.fn.xtautosave.saveSelect($this,$(elem),index)})}}(jQuery,window);